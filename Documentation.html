<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BetaHub Unity Plugin Documentation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        code {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            font-size: 0.9em;
            padding: 2px 4px;
        }
        pre {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 10px;
            overflow-x: auto;
        }
        blockquote {
            border-left: 4px solid #3498db;
            margin: 0;
            padding-left: 20px;
            color: #7f8c8d;
        }
        .note {
            background-color: #e8f4f8;
            border-left: 4px solid #3498db;
            padding: 10px;
            margin: 20px 0;
        }
        .warning {
            background-color: #fff5f5;
            border-left: 4px solid #e74c3c;
            padding: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>BetaHub Unity Plugin Documentation</h1>

    <div class="note">
        <h3>API Usage and Terms</h3>
        <p>This plugin connects to the BetaHub API at <a href="https://betahub.io">betahub.io</a>. Key points:</p>
        <ul>
            <li><strong>Free Access:</strong> All users get full access to every feature without volume limits</li>
            <li><strong>Video Storage:</strong> Free users can upload up to 60 seconds of video per submission, with no additional fees</li>
            <li><strong>No Subscription Required:</strong> The free account allows unlimited feedback reporting</li>
            <li><strong>Demo Project Included:</strong> The plugin includes a demo project for immediate testing without configuration</li>
        </ul>
        <p>For complete API terms and conditions, visit <a href="https://betahub.io/api-terms">betahub.io/api-terms</a></p>
    </div>

    <p>Welcome to the BetaHub Unity Plugin! This guide will help you integrate our bug reporting tool into your Unity project, streamlining the process of collecting and managing bug reports from your game testers and players.</p>

    <h2>Prerequisites</h2>

    <p>Before you begin, please ensure you have:</p>

    <ol>
        <li>A free BetaHub account (Sign up at <a href="https://app.betahub.io">app.betahub.io</a>)</li>
        <li>Created a project on BetaHub:
            <ul>
                <li>Log in to your account</li>
                <li>Click the "New Project" button</li>
                <li>Follow up with the project creation wizard</li>
                <li>While on the project page, click the "Settings/General" menu on the left</li>
                <li>Note down your Project ID from the "Project Information" frame (you'll need this for plugin configuration)</li>
            </ul>
        </li>
    </ol>

    <h4>FFmpeg Installation</h4>

    <p>The plugin uses FFmpeg for video recording. Install it in your project by clicking on <code>Tools > BetaHub > Install FFmpeg</code> in the Unity editor.</p>

    <div class="warning">
        <strong>Note:</strong> The plugin currently supports <strong>Windows</strong>, <strong>macOS</strong>, and <strong>Linux</strong>. For other platforms, manual FFmpeg installation and code adjustments may be necessary.
    </div>

    <div class="warning">
        <h2>IL2CPP Support and FFmpeg Video Recording</h2>
        <p><strong>If you are building your Unity project with IL2CPP as the scripting backend, special handling is required for video recording to work:</strong></p>
        <ul>
            <li>The plugin uses a native process wrapper library to launch and communicate with FFmpeg when running under IL2CPP. The standard .NET <code>Process</code> class is not available in IL2CPP builds.</li>
            <li><strong>You must define the scripting symbol <code>ENABLE_BETAHUB_FFMPEG</code> in your project settings</strong> to enable native FFmpeg support for IL2CPP builds.</li>
            <li>The native library (<code>libbetahub_process_wrapper</code>) must be present in your build's <code>Plugins</code> directory for your platform (e.g., <code>Plugins/macOS/</code>, <code>Plugins/Linux/</code>).</li>
            <li>If you do not define <code>ENABLE_BETAHUB_FFMPEG</code>, video recording will be disabled in IL2CPP builds and a warning will be logged at runtime.</li>
            <li>If you are using Mono or .NET scripting backend, the plugin will use the standard .NET <code>Process</code> class and does not require the native library or the scripting symbol.</li>
        </ul>
        <p><strong>Summary:</strong></p>
        <ul>
            <li>For IL2CPP: define <code>ENABLE_BETAHUB_FFMPEG</code> and ensure the native library is present.</li>
            <li>For Mono/.NET: no special action is needed.</li>
        </ul>
    </div>

    <div class="warning">
        <h2>Performance: Disabling Logger</h2>
        <p><strong>If you need to disable BetaHub's logging system for performance reasons or production builds:</strong></p>
        <ul>
            <li>Define the scripting symbol <code>DISABLE_BETAHUB_LOGGER</code> in Player Settings > Scripting Define Symbols</li>
            <li>This prevents the logger from capturing Unity logs, which can cause:
                <ul>
                    <li>File I/O operations every time Unity logs a message</li>
                    <li>CPU overhead from continuous disk writes</li>
                    <li>File access violations when multiple Unity instances run simultaneously</li>
                </ul>
            </li>
            <li>Bug reports will still work, but won't include captured Unity logs</li>
            <li>A warning will be displayed when BugReportUI starts with logging disabled</li>
        </ul>
        <p><strong>When to use:</strong></p>
        <ul>
            <li>Production builds where logging overhead impacts performance</li>
            <li>Multi-instance Unity scenarios (automated testing, CI/CD)</li>
            <li>Projects with high-frequency logging that causes file access issues</li>
        </ul>
    </div>

    <h3>Quick Start</h3>

    <div class="note">
        <strong>Demo Project:</strong> The plugin comes pre-configured with a demo project, so you can test bug submissions immediately without any setup. Demo submissions are unlisted, and you'll find a link to view them in the Unity console log after submission.
    </div>

    <ol>
        <li>Locate the BugReportingFormCanvas prefab in Packages/BetaHub Bug Reporter/Runtime/Prefabs.</li>
        <li>Drag it into your scene.</li>
        <li>Run your game and press <code>F12</code> to test the bug report form with the demo project.</li>
        <li>To use your own project:
            <ul>
                <li>Select the BugReportingFormCanvas object in the hierarchy</li>
                <li>In the inspector, find the <code>Project ID</code> field and enter your BetaHub project ID</li>
                <li>Enter your <code>Auth Token</code> (found in Project Settings > Integrations > Tokens)</li>
            </ul>
        </li>
    </ol>

    <p>You're all set! Run your game and press <code>F12</code> to open the bug report form.</p>

    <h3>Configuration</h3>

    <p>Adjust these settings in the BugReportingFormCanvas inspector:</p>

    <ul>
        <li><strong>Project ID</strong>: Your BetaHub project identifier (found in Project Settings > General > Project Information).</li>
        <li><strong>Auth Token</strong>: Your application token for API authentication (found in Project Settings > Integrations > Tokens). This is <strong>not an API key</strong> and does not need to be kept secret - it's a project identifier that helps prevent API abuse and spam while identifying your application.</li>
        <li><strong>Default Email Address</strong>: <em>Optional programmatic field.</em> If set, this email address will be used as the default email address of the reporter. This is a hidden field intended to be pre-filled programmatically by the developer if the user is already logged in with a specific email address.</li>
        <li><strong>Shortcut Key</strong>: Default is F12. Set to None to disable and open the form programmatically.</li>
        <li><strong>Performance_Sampler</strong>
            <ul>
                <li><strong>Sample Frequency</strong>: How often to sample game performance.</li>
                <li><strong>Sample Duration</strong>: How long to sample game performance.</li>
            </ul>
        </li>
        <li><strong>Game_Recorder</strong>
            <ul>
                <li><strong>Frame Rate</strong>: Default is 30. Higher rates may increase file size and resource usage.</li>
                <li><strong>Recording Duration</strong>: Default is 60 seconds.</li>
                <li><strong>Downscale Video</strong>: <em>Off by default.</em> If enabled, the video will be downscaled to a maximum resolution (default: 1920x1080) if your game runs at a higher resolution. This helps reduce CPU usage and file size when recording on high-resolution displays. Enable this option in the inspector if you notice high CPU usage or stuttering during recording at large resolutions.</li>
                <li><strong>Render FPS Overlay</strong>: <em>On by default.</em> When enabled, the current FPS (frames per second) will be displayed as an overlay on the recorded video. This is useful for performance analysis and helps identify frame rate issues during bug reports. The FPS counter appears in the bottom-left corner of the video.</li>
                <li><strong>Render Cursor</strong>: <em>Off by default.</em> When enabled, the mouse cursor position will be rendered in the recorded video. This is useful for showing user interactions and click locations during bug reports. The cursor is drawn as a white arrow with a black outline for visibility against different backgrounds.</li>
                <li><strong>Mirror Vertically</strong>: <em>Off by default.</em> When enabled, the recorded video will be flipped vertically (upside down). This setting is useful for specific rendering setups or platforms where the video output needs to be inverted.</li>
                <li><strong>Capture Render Texture</strong>: <em>Optional.</em> When set, the recorder will capture from this specific render texture instead of the main screen. This is useful for recording from specific cameras, UI canvases, or other render targets. The recorder will automatically handle scaling if the render texture dimensions don't match the output resolution. Leave empty to record the main screen.</li>
            </ul>
        </li>
        <li><strong>Unity Events</strong>
            <ul>
                <li><strong>On Bug Report Window Shown</strong>: Unity event triggered when the bug reporting window is displayed. Use this to pause your game, modify UI states, or perform other actions when bug reporting begins.</li>
                <li><strong>On Bug Report Window Hidden</strong>: Unity event triggered when the bug reporting window is closed or hidden. Use this to resume your game, restore UI states, or perform cleanup actions when bug reporting ends.</li>
            </ul>
        </li>
    </ul>

    <h3>Programmatic Integration</h3>

    <p>To open the bug report form on specific events:</p>

    <ol>
        <li>Call <code>SetActive</code> on the <code>BugReportUI</code> object.</li>
        <li>Be aware of default inclusions:
            <ul>
                <li>Video: Yes (control with <code>IncludeVideo</code>)</li>
                <li>Player.log: Yes (control with <code>IncludePlayerLog</code>)</li>
                <li>Screenshots: No (add manually)</li>
            </ul>
        </li>
    </ol>

    <h4>Including Screenshots</h4>

    <p>Use <code>AddScreenshot</code> on the <code>BugReportUI</code> object:</p>

    <pre><code>public void AddScreenshot(string path, bool removeAfterUpload)</code></pre>

    <div class="note">
        <strong>Tip:</strong> Capture screenshots before opening menus for more valuable bug context.
    </div>

    <h4>Including Logs</h4>

    <p>Use <code>AddLog</code> on the <code>BugReportUI</code> object:</p>

    <pre><code>public void AddLog(string path, bool removeAfterUpload)</code></pre>

    <div class="note">
        <strong>Note:</strong> Call these functions each time you want to include screenshots or logs. The plugin doesn't store them between reports.
    </div>

    <h2>Support</h2>

    <p>For any questions or issues, please contact us:</p>

    <ul>
        <li>Email: <a href="mailto:support@betahub.io">support@betahub.io</a></li>
        <li>Discord: <a href="https://discord.gg/g2wpRtG">Join our community</a></li>
    </ul>

    <p>Thank you for choosing BetaHub for your game development needs!</p>
</body>
</html>
